(()=>{var e={7610:(e,t,r)=>{"use strict";var s=r(8880),n=r(9592),a=r(3673),o=r(4184),i=r(4972),l=r(9560),c=r(1988);const u={__name:"App",setup(e){const{startLoading:t}=(0,c.x)(),r=()=>{l.K.accessToken&&o.O.systemInfo?.is_setup&&(0,o.I9)()};return(0,i.Z)((()=>{r()}),8e3),(0,a.YP)((()=>o.O.systemInfo?.is_setup),(e=>{r(),e&&t()})),(e,t)=>{const r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(r)}}},d=u,p=d;var h=r(4584),m=r(9696);async function v(e,t){const s="function"===typeof h["default"]?await(0,h["default"])({}):h["default"],{storeKey:a}=await Promise.resolve().then(r.bind(r,4584)),o="function"===typeof m.Z?await(0,m.Z)({store:s}):m.Z;s.$router=o;const i=e(p);return i.use(n.Z,t),{app:i,store:s,storeKey:a,router:o}}var f=r(742),g=r(8508),b=r(6417),y=r(8416),_=r(6249);const w={config:{},lang:f.Z,plugins:{Dialog:g.Z,Notify:b.Z,AppFullscreen:y.Z,Loading:_.Z}};async function j({app:e,router:t,store:r,storeKey:s}){e.use(t),e.use(r,s),e.mount("#q-app")}v(s.ri,w).then(j)},2306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(2250),n=r.n(s),a=r(6833),o=r(8298);class i{constructor(){n()(this,"BaseUrl",o.Z.BACKEND_URL)}http(e,...t){return(0,a.h)(`${this.BaseUrl}${e}`,...t)}}const l=i},7817:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(2250),n=r.n(s),a=r(2306);class o extends a.Z{constructor(...e){super(...e),n()(this,"getStatus",(()=>this.http("/v1/daemon/status"))),n()(this,"start",(e=>this.http("/v1/daemon/start",e,"POST"))),n()(this,"stop",(e=>this.http("/v1/daemon/stop",e,"POST"))),n()(this,"getList",(()=>this.http("/v1/jobs/list"))),n()(this,"update",((e,t)=>this.http("/v1/jobs/change-job-status",{id:e,...t},"POST"))),n()(this,"getLog",(e=>this.http("/v1/jobs/log",{id:e},"POST")))}}const i=new o},3114:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(2250),n=r.n(s),a=r(2306);class o extends a.Z{constructor(...e){super(...e),n()(this,"getInfo",(e=>this.http("/system-status",e))),n()(this,"getPrepareStatus",(()=>this.http("/pre-job",{},"POST")))}}const i=new o},1988:(e,t,r)=>{"use strict";r.d(t,{x:()=>C});var s=r(8508),n=r(3114),a=r(4972),o=r(3673),i=r(1959),l=r(2323),c=r(8777),u=r(4184);const d=(0,o._)("div",{class:"col text-h6"},"初始化",-1),p={class:"row items-center q-gutter-x-sm"},h={class:"text-h6"},m={class:"text-grey"},v=(0,o._)("div",{class:"text-bold"},"错误信息",-1),f={class:"col bg-grey-3 q-pa-sm q-ma-none overflow-auto"},g=(0,o._)("div",{class:"text-bold q-mt-md"},"修改名称失败的字幕文件列表",-1),b={class:"col bg-grey-3 q-pa-sm q-ma-none overflow-auto"},y={__name:"LoadingDialogAppPrepareJobInit",setup(e){const{dialogRef:t}=(0,c.Z)(),r=(0,o.Fl)((()=>u.O.preJobStatus)),s=(0,o.Fl)((()=>u.O.preJobStatus.is_done)),n=(0,o.Fl)((()=>!!u.O.preJobStatus.g_error_info||u.O.preJobStatus.rename_err_results?.length>0)),a=(0,o.Fl)((()=>n.value));return(0,o.YP)(s,(e=>{e&&!a.value&&t.value?.hide()})),(e,c)=>{const u=(0,o.up)("q-card-section"),y=(0,o.up)("q-spinner"),_=(0,o.up)("q-icon"),w=(0,o.up)("q-btn"),j=(0,o.up)("q-card"),S=(0,o.up)("q-dialog"),k=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(S,{ref_key:"dialogRef",ref:t,class:"relative-position",persistent:"",maximized:"","transition-duration":"0"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"column full-height overflow-hidden"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"bg-primary row items-center text-white"},{default:(0,o.w5)((()=>[d])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,i.SU)(s)?((0,o.wg)(),(0,o.j4)(_,{key:1,name:"check_circle",color:"primary",size:"20px"})):((0,o.wg)(),(0,o.j4)(y,{key:0,color:"primary"})),(0,o._)("div",h,(0,l.zw)((0,i.SU)(r).stage_name),1)]),(0,o._)("div",m,(0,l.zw)((0,i.SU)(r).now_process_info),1)])),_:1}),(0,i.SU)(n)?((0,o.wg)(),(0,o.j4)(u,{key:0,class:"col column justify-center no-wrap"},{default:(0,o.w5)((()=>[v,(0,o._)("pre",f,(0,l.zw)((0,i.SU)(r).g_error_info),1),(0,i.SU)(r)?.rename_err_results?.length?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[g,(0,o._)("pre",b,(0,l.zw)((0,i.SU)(r).rename_err_results.join("\n")),1)],64)):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0),(0,i.SU)(a)?((0,o.wg)(),(0,o.j4)(u,{key:1,class:"row justify-center"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(w,{color:"negative",label:"关闭"},null,512),[[k]])])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1},512)}}};var _=r(6778),w=r(151),j=r(5589),S=r(9400),k=r(4554),I=r(2165),O=r(677),Z=r(7518),F=r.n(Z);const P=y,T=P;F()(y,"components",{QDialog:_.Z,QCard:w.Z,QCardSection:j.Z,QSpinner:S.Z,QIcon:k.Z,QBtn:I.Z}),F()(y,"directives",{ClosePopup:O.Z});let q=!1;const x=()=>{q||(q=!0,s.Z.create({component:T}).onDismiss((()=>{q=!1})))},C=()=>{const e=(0,o.Fl)((()=>u.O.preJobStatus)),t=()=>{!0!==e.value?.is_done&&x()},r=async()=>{const[e]=await n.Z.getPrepareStatus();u.O.preJobStatus=e},{resetInterval:s,stopInterval:i}=(0,a.Z)((async()=>{await r(),t()}),1e3,!1),l=async()=>{await r(),t(),s()};return(0,o.YP)((()=>e.value?.is_done),(e=>{!0===e&&i()})),(0,o.Jd)((()=>{i()})),{startLoading:l}}},4972:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(1959),n=r(3673);const a=(e,t,r=!0)=>{const a=(0,s.iH)(null);r&&(a.value=setInterval((()=>{e()}),t),e());const o=()=>{clearInterval(a.value),a.value=setInterval((()=>{e()}),t),e()},i=()=>{clearInterval(a.value)};return(0,n.Jd)((()=>{clearInterval(a.value)})),{timer:a,resetInterval:o,stopInterval:i}},o=a},8298:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const s={get BACKEND_URL(){return new URL(window.location.href).pathname.replace(/\/$/,"")},CSF_SUBTITLES_API_URL:"https://api.subtitle.best",CSF_SUBTITLES_API_KEY:"5akwmGAbuFWqgaZf9QwT"}},9696:(e,t,r)=>{"use strict";r.d(t,{N:()=>l,Z:()=>c});var s=r(3340),n=r(8339),a=r(4184),o=r(7647);const i=n.r5,l=(0,n.p7)({scrollBehavior:()=>({left:0,top:0}),routes:o.Z,history:i("")});l.beforeEach((async(e,t,r)=>{a.O.systemInfo||await(0,a.C5)(),!1===a.O.systemInfo?.is_setup&&"/setup"!==e.path&&r("/setup"),!0===a.O.systemInfo?.is_setup&&"/setup"===e.path&&r("/"),r()}));const c=(0,s.BC)((()=>l))},7647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(3673);function n(e,t,r,n,a,o){const i=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(i)}const a={name:"RouterPlaceholder"};var o=r(4260);const i=(0,o.Z)(a,[["render",n]]),l=i,c=[{path:"/",component:()=>Promise.all([r.e(736),r.e(64),r.e(264)]).then(r.bind(r,4264)),redirect:{name:"overview"},children:[{name:"overview",path:"overview",component:()=>Promise.all([r.e(736),r.e(64),r.e(446)]).then(r.bind(r,9446)),meta:{title:"总览",icon:"home"}},{name:"library",path:"library",component:l,meta:{title:"库",icon:"video_library"},children:[{name:"library.movie.list",path:"library/movies",component:()=>Promise.all([r.e(736),r.e(64),r.e(230)]).then(r.bind(r,8856)),meta:{title:"电影",icon:"movie"}},{name:"library.tv.list",path:"library/tvs",component:()=>Promise.all([r.e(736),r.e(64),r.e(483)]).then(r.bind(r,5483)),meta:{title:"连续剧",icon:"live_tv"}}]},{name:"jobs",path:"jobs",component:()=>Promise.all([r.e(736),r.e(64),r.e(696)]).then(r.bind(r,3696)),meta:{title:"下载队列",icon:"assignment"}},{name:"settings",path:"settings",component:()=>Promise.all([r.e(736),r.e(64),r.e(526)]).then(r.bind(r,1526)),meta:{title:"配置中心",icon:"settings"}}]},{path:"/access",component:l,children:[{path:"login",component:()=>Promise.all([r.e(736),r.e(64),r.e(282)]).then(r.bind(r,1372))}]},{path:"/setup",component:()=>Promise.all([r.e(736),r.e(64),r.e(978)]).then(r.bind(r,5787))},{path:"/test",component:()=>Promise.all([r.e(736),r.e(64),r.e(398)]).then(r.bind(r,6398))},{path:"/:catchAll(.*)*",component:()=>r.e(643).then(r.bind(r,6643))}],u=c},4584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,store:()=>a});var s=r(3340),n=r(741);const a=(0,n.MT)({modules:{},strict:!1}),o=(0,s.h)((()=>a))},2170:(e,t,r)=>{"use strict";r.d(t,{K:()=>n});var s=r(1959);const n=(0,s.qj)({settings:null})},4184:(e,t,r)=>{"use strict";r.d(t,{C5:()=>l,I9:()=>d,O:()=>i,RF:()=>u,rV:()=>c});var s=r(1959),n=r(3673),a=r(3114),o=r(7817);const i=(0,s.qj)({systemInfo:null,jobStatus:null,preJobStatus:null}),l=async()=>{const[e]=await a.Z.getInfo();i.systemInfo=e},c=(0,n.Fl)((()=>"running"===i.jobStatus?.status)),u=(0,n.Fl)((()=>i.systemInfo?.is_running_in_docker)),d=async()=>{const[e]=await o.Z.getStatus();i.jobStatus=e}},9560:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});var s=r(1959),n=r(6395);const a=(0,s.qj)({username:n.Z.getItem("token")?.username,accessToken:n.Z.getItem("token")?.accessToken})},3582:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5936);const n={onResponseFullFilled:e=>{try{if(e.headers["x-daily-limit"]){const t={dailyLimit:e.headers["x-daily-limit"],dailyCount:e.headers["x-daily-count"],expireTime:e.headers["x-api-expiration-time"]};s.Z.emit("subtitle-best-api-limit-info",t)}}catch(t){}return e}}},2053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});r(3610);var s=r(8298),n=r(2170);const a={onRequestFullFilled:e=>{const t=n.K.settings?.subtitle_sources?.subtitle_best_settings?.api_key;return["get","delete"].includes(e.method)?(e.params=e.params||{},e.params.api_key=t):(e.data=e.data||{},e.data.api_key=t),e.headers.Authorization=`Bearer ${s.Z.CSF_SUBTITLES_API_KEY}`,e}}},4544:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});const s=e=>{console.error("interceptor catch the error!\n",e);let t=e.data?.message||e.message||"网络错误";401===e.status&&(t=e.data.message||"Token不可用");const r={error:e,message:t};return Promise.reject(r)},n={onRequestRejected:e=>s(e),onResponseFullFilled:e=>{const{data:t}=e;return t?.message&&"ok"!==t?.message||t?.code&&t?.code>300?s(e):e},onResponseRejected:e=>s(e?.response||e)}},6833:(e,t,r)=>{"use strict";r.d(t,{l:()=>p,h:()=>u});var s=r(2250),n=r.n(s),a=(r(5663),r(3610),r(52)),o=r.n(a);class i{constructor(){n()(this,"axiosInstance",null),this.axiosInstance=o().create({timeout:6e4,withCredentials:!1})}registerInterceptor(e){const{onRequestFullFilled:t,onRequestRejected:r,onResponseFullFilled:s,onResponseRejected:n}=e;(t||r)&&this.axiosInstance.interceptors.request.use(t,r),(s||n)&&this.axiosInstance.interceptors.response.use(s,n)}registerInterceptorsFromDirectory(e){const t=e.keys().reduce(((t,r)=>(t.push(e(r).default),t)),[]);t.forEach((e=>{this.registerInterceptor(e)}))}createRequest(e="",t={},r="GET",s={}){s.headers=s.headers||{};const n=Object.assign(s,{method:r.toUpperCase(),url:e,headers:{...s.headers}});return["DELETE","GET"].includes(r.toUpperCase())?s.params=t:s.data=t,this.axiosInstance.request(n).then((e=>[e.data,null,e])).catch((e=>[null,e]))}}const l=i,c=new l;c.registerInterceptorsFromDirectory(r(9293));const u=c.createRequest.bind(c),d=new l;d.registerInterceptorsFromDirectory(r(1817));const p=d.createRequest.bind(d)},5245:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(9560);const n={onRequestFullFilled:e=>{const{accessToken:t}=s.K;return t&&(e.headers.Authorization=`Bearer ${t}`),e}}},6762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});r(5663);var s=r(9696);const n=e=>{console.error("interceptor catch the error!\n",e);let t=e.data?.message||e.message||"网络错误";401===e.status&&(t=e.data.message||"权限不足，请登录重试",s.N.push("/access/login"));const r={error:e,message:t};return Promise.reject(r)},a={onRequestRejected:e=>n(e),onResponseFullFilled:e=>{const{data:t}=e;return t?.code&&t?.code>300?n(e):e},onResponseRejected:e=>n(e?.response||e)}},1817:(e,t,r)=>{var s={"./api-limit-info-handler.js":3582,"./auth-header.js":2053,"./base-handler.js":4544};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=1817},9293:(e,t,r)=>{var s={"./auth-header.js":5245,"./base-handler.js":6762};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id=9293}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,(()=>{var e=[];r.O=(t,s,n,a)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){for(var[s,n,a]=e[u],i=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](s[l])))?s.splice(l--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[s,n,a]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,s)=>(r.f[s](e,t),t)),[]))})(),(()=>{r.u=e=>"js/"+(64===e?"chunk-common":e)+"."+{64:"28ca8e83",230:"6e2018b0",264:"c73ae392",282:"29a1e0a6",398:"bd1149ed",446:"4269b567",483:"5a75099d",526:"0d804495",643:"394210a3",696:"8afacea8",978:"226d4e4a"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/"+({143:"app",736:"vendor"}[e]||e)+"."+{143:"31d6cfe0",230:"6ba379a0",264:"4b0a6982",282:"eae4dc36",483:"ab8085fc",526:"4276cd37",696:"891520cd",736:"6611ef4c",978:"eae4dc36"}[e]+".css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="chinese-sub-finder-panel:";r.l=(s,n,a,o)=>{if(e[s])e[s].push(n);else{var i,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+a){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+a),i.src=s),e[s]=[n];var p=(t,r)=>{i.onerror=i.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{r.p=""})(),(()=>{var e=(e,t,r,s)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var a=a=>{if(n.onerror=n.onload=null,"load"===a.type)r();else{var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=i,n.parentNode.removeChild(n),s(l)}};return n.onerror=n.onload=a,n.href=t,document.head.appendChild(n),n},t=(e,t)=>{for(var r=document.getElementsByTagName("link"),s=0;s<r.length;s++){var n=r[s],a=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===e||a===t))return n}var o=document.getElementsByTagName("style");for(s=0;s<o.length;s++){n=o[s],a=n.getAttribute("data-href");if(a===e||a===t)return n}},s=s=>new Promise(((n,a)=>{var o=r.miniCssF(s),i=r.p+o;if(t(o,i))return n();e(s,i,n,a)})),n={143:0};r.f.miniCss=(e,t)=>{var r={230:1,264:1,282:1,483:1,526:1,696:1,978:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=s(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))}})(),(()=>{var e={143:0};r.f.j=(t,s)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var a=new Promise(((r,s)=>n=e[t]=[r,s]));s.push(n[2]=a);var o=r.p+r.u(t),i=new Error,l=s=>{if(r.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var a=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,n[1](i)}};r.l(o,l,"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[o,i,l]=s,c=0;if(o.some((t=>0!==e[t]))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(l)var u=l(r)}for(t&&t(s);c<o.length;c++)a=o[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},s=globalThis["webpackChunkchinese_sub_finder_panel"]=globalThis["webpackChunkchinese_sub_finder_panel"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=r.O(void 0,[736],(()=>r(7610)));s=r.O(s)})();